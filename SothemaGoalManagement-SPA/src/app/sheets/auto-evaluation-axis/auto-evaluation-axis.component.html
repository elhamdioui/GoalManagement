<div class="card-header" style="cursor: pointer" (click)="isCollapsed = !isCollapsed">
  <div class="row">
    <div class="col-md-3">{{goalsByAxisInstance.title}}</div>
    <div class="col-md-4">Pondération d'Axe:
      <span class="badge badge-pill badge-danger" title="Pondération d'axe">
        {{goalsByAxisInstance.userWeight}} %
      </span>
    </div>
    <div class="col-md-2">
      <h4>
        Total axe:
      </h4>
    </div>
    <div class="col-md-2">
      <h4>
        <span class="badge badge-pill badge-success" title="Total d'axe">
          {{goalsByAxisInstance.axisGrade}} %
        </span>
      </h4>
    </div>
    <div class="col-md-1">
      <div class="float-right">
        <fa-icon [icon]="faCaretDown" *ngIf="isCollapsed"></fa-icon>
        <fa-icon [icon]="faCaretUp" *ngIf="!isCollapsed"></fa-icon>
      </div>
    </div>
  </div>
</div>

<div class="card-body" *ngIf="!isCollapsed">
  <div class="alert alert-danger mt-3" role="alert" *ngIf="goalsByAxisInstance.goals && goalsByAxisInstance.goals.length === 0">
    <p>Aucun objectif n'a encore été ajouté...</p>
  </div>

  <div *ngIf="goalsByAxisInstance.goals && goalsByAxisInstance.goals.length > 0">
    <table class="table table-hover">
      <tr>
        <th style="width: 60%">Objectif</th>
        <th style="width: 20%">Type</th>
        <th style="width: 5%">Poids</th>
        <th style="width: 5%">Note</th>
        <th style="width: 5%"></th>
        <th style="width: 5%"></th>
      </tr>
      <tr *ngFor="let goal of goalsByAxisInstance.goals">
        <td>{{ goal.description }}</td>
        <td>{{ goal.goalType.name }} {{ goal.projectName != '' ? '-' : ''}} {{ goal.projectName }}</td>
        <td align="center">
          <span class="badge badge-pill badge-info" title="Poids d'objectif">
            {{ goal.weight }} %
          </span>
        </td>
        <td align="center">
          <span class="badge badge-pill badge-success" title="Poids d'objectif">
            {{ goal.goalGrade }} %
          </span>
        </td>
        <td>
          <button class="btn btn-outline-primary rounded-circle" (click)="addEvaluation(goal)" title="Ajouter une évaluation">
            <fa-icon [icon]="faPlus"></fa-icon>
          </button>
        </td>
        <td>
          <button class="btn btn-outline-secondary rounded-circle" (click)="showEvaluations(goal)" title="Historique des évaluations">
            <fa-icon [icon]="faHistory"></fa-icon>
          </button>
        </td>
      </tr>
    </table>
  </div>
</div>
