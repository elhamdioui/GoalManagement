<div class="card mt-1 border-secondary" (click)="toggleGoal()">
  <div class=" card-header" style="cursor: pointer">
    <div class="row float-right">
      <fa-icon [icon]="faCaretDown" *ngIf="isCollapsed"></fa-icon>
      <fa-icon [icon]="faCaretUp" *ngIf="!isCollapsed"></fa-icon>
    </div>
    <div class="row">
      <div class="col-md-9">
        {{ goal.description }}
      </div>

      <div class="col-sm-3">
        {{ goal.projectName }}
      </div>
    </div>

    <div class="row">
      <div class="col-sm-3">
        <label>Type d'objectif:</label>
        {{ goal.goalType.name }}
      </div>

      <div class="col-sm-3">
        <label>Poids d'Objectif:</label>
        <span class="badge badge-pill badge-info" title="Poids d'objectif">
          {{ goal.weight }} %
        </span>
      </div>

      <div class="col-sm-3">
        <label>Note d'Objectif:</label>
        <span class="badge badge-pill badge-success" title="Poids d'objectif">
          {{ goal.goalGrade }} %
        </span>
      </div>

      <div class="col-sm-3 float-right">
        <button class="btn btn-primary" (click)="addEvaluation()">
          Ajouter une évaluation
        </button>
      </div>
    </div>

  </div>
  <div class="card-body" *ngIf="!isCollapsed" (click)="$event.stopPropagation()">
    <table class="table table-hover">
      <tr>
        <th style="width: 20%">Date heure</th>
        <th style="width: 15%">Évaluateur</th>
        <th style="width: 18%">Taux de réalisation</th>
        <th style="width: 47%">Commentaire</th>
      </tr>
      <tr *ngFor="let evaluation of goal.goalEvaluations">
        <td>{{ evaluation.created | date :'short' }}</td>
        <td>{{ evaluation.evaluatorName }}</td>
        <td>
          <span class="badge badge-pill badge-success">{{ evaluation.completionRate }}%</span>
        </td>
        <td>{{ evaluation.comment }}</td>
      </tr>
    </table>
  </div>
</div>
